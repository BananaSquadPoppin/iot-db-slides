<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>IoT &ndash; Datenbanken</title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/white.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <style>
      .reveal kbd {
        background-color: #f0f0f0;
        color: #444;
        border: 1px solid;
        border-radius: 0.3em;

        font-size: 0.6em;

        padding: 0.2em 0.5em;
        vertical-align: middle;
      }
      .dim-bg .slide-background.present {
        opacity: 0.6;
      }

      .reveal .u-mt {
        margin-top: 1em;
      }
    </style>

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement('link');
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName('head')[0].appendChild(link);
    </script>

    <script>
      window.onReady = () => (
        new Promise((resolve, reject) => {
          document.addEventListener('DOMContentLoaded', resolve)
        })
      )
    </script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <h2>IoT 1</h2>
          <h1>Datenbanken</h1>
          <h3>HTML, CSS, JavaScript &amp; SQL</h3>
          <address>Timo Uhlmann</address>
        </section>

        <section>
          <h2>About Me</h2>
          <ul>
            <li>Work: <a target='_blank' href='https://zeroseven.de'>https://zeroseven.de</a> / Ulm</li>
            <li>GitHub / Twitter: @amiuhle</li>
          </ul>
        </section>

        <section data-background="images/mac-tools.jpg" data-state="dim-bg">
          <h2>Installation Libraries &amp; Tools</h2>
          <ul>
            <li>
              Hat jemand keinen Mac?
              <ul>
                <li class='fragment raus'>☞ Raus!</li>
                <script>
                  onReady().then(() => {
                    Reveal.addEventListener('fragmentshown', function (event) {
                      const raus = document.querySelector('.raus')
                      const originalText = raus.textContent
                      window.setTimeout(() => {
                        raus.textContent = 'Sehr schön!'
                      }, 500)
                      Reveal.addEventListener('fragmenthidden', function (e) {
                        window.setTimeout(() => {
                          raus.textContent = originalText
                        }, 100)
                      });
                    });
                  })
                </script>
              </ul>
            </li>
          </ul>
        </section>

        <section>
          <h2>Terminal</h2>
          
          <img src='images/terminal.png' alt='Terimal unter Ubuntu' />

          <p>macOS: <code>Terminal.app</code></p>

          <aside class="notes" data-markdown>
            * Kommandozeilen-Programme
            * Kann auch gut aussehen
            * [Hyper](https://github.com/zeit/hyper), [iTerm2](https://www.iterm2.com/)
          </aside>
        </section>

        <section>
          <h2>
            <code>Homebrew</code>
          </h2>
          <q>&ldquo;The missing package manager for macOS&rdquo;</q>
          <a href='https://brew.sh/' target='_blank'>https://brew.sh</a>
          <pre><code data-trim data-noescape>
            # Datenbank
            brew install sqlite
            # Node.js (JavaScript Runtime)
            brew install node
            # package manager
            brew install yarn
          </code></pre>
          <aside class='notes' data-markdown>
            Homebrew
            
            * Paketmanager fuer macOS 
            * Wird verwendet, um Kommandozeilen-Programme zu installieren 
            * ... und wird auch auf der Kommandozeile verwendet

            Node.js

            * JavaScript Runtime ausserhalb des Browsers 
            * Wird u.a. fuer serverseitige Webentwicklung verwendet 
            * Nachinstallierbare Liraries via [`npm` ](https://www.npmjs.com/)
            
            yarn

            * Paketmanager fuer Node.js, Alternative zu `npm`
            * "the world’s largest software registry"
            * 450,000 Libraries
          </aside>
        </section>

        <section>
          <h2>Windows</h2>
          <ul>
            <li>Node.js &mdash; https://nodejs.org/en/download/</li>
            <li>Yarn &mdash; https://yarnpkg.com/lang/en/docs/install/#windows</li>
            <li>SQLite &mdash; https://sqlite.org/download.html</li>
          </ul>
        </section>

        <section>
          <section>
            <h2>Editor</h2>
            Visual Studio Code <br />
            <a href='https://code.visualstudio.com/' target='_blank'>https://code.visualstudio.com</a>

            <p>Alternativen</p>

            <ul>
              <li>Atom &mdash; <a href='https://atom.io/' target='_blank'>https://atom.io</a></li>
              <li>Sublime Text &mdash; <a href='https://www.sublimetext.com/' target='_blank'>https://www.sublimetext.com</a></li>
            </ul>

            <aside class='notes' data-markdown>
              Support waehrend des Workshops nur für VS Code  
              SourceTree / GitKraken
            </aside>
          </section>

          <section>
            <h2>VS Code</h2>

            <ul>
              <li>Datei öffnen: <kbd>Cmd</kbd> + <kbd>P</kbd></li>
              <li>Befehl ausführen: <kbd>Cmd</kbd> + <kbd>Shift</kbd> + <kbd>P</kbd></li>
            </ul>
          </section>

          <section>
            <img src='images/vs-code.png' alt='VS Code' />
            
            <aside class='notes' data-markdown>
              1. Cmd + Shift + P 
              * "Welcome" eingeben + Enter
              * Interactive playground &amp; Interface overview
            </aside>
          </section>

          <section>
            <h2>Extensions</h2>
            <ul>
              <li>Beautify</li>
              <li>Better Merge</li>
              <li>Debugger for Chrome</li>
              <li>Git History (git log)</li>
              <li>gitignore</li>
              <li>JavaScript Standard Format</li>
              <li>JavaScript Standard Style</li>
              <li>npm</li>
              <li>npm Intellisense</li>
            </ul>
            <aside class="notes">
              Erweitern allgemeine und sprachspezifische Funktionalitaet
            </aside>
          </section>
        </section>

        <section>
          <section>
            <h2>Git</h2>
            <ul>
              <li>Versionskontrollsystem</li>
              <li>Änderungen am Code durch <strong>Commits</strong></li>
              <li>Änderungen zwischen Commits können visualisiert werden</li>
              <li>Alte Versionen können ausgecheckt werden</li>
              <li class='u-mt'>&rarr; Ermöglicht die gemeinsame Arbeit an einem Projekt</li>
              <li>&rarr; Endloses <em>Undo</em></li>
            </ul>
          </section>

          <section>
            <h2>Übung: Git</h2>

            <a href="https://github.com/jlord/git-it-electron" target='_blank'>https://github.com/jlord/git-it-electron</a>

            <p>Herunterladen, öffnen und den Anweisungen folgen</p>
          </section>

          <section>
            <h2>GUI Clients</h2>
            <ul>
              <li>GitHub Desktop</li>
              <li>Visual Studio Code</li>
              <li>Source Tree</li>
              <li>GitKraken</li>
            </ul>
          </section>
        </section>

        <section>
          <section>
            <h2>Vorlesungsfolien clonen</h2>
            <ol>
              <li>Visual Studio Code öffnen</li>
              <li>
                <kbd>Cmd</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd> <br/>
                &rarr; "Git: Clone" <br />
              </li>
              <li><code>https://github.com/amiuhle/iot-db-slides.git</code></li>
            </ol>

            <aside class="notes" data-markdown>
              Alternativ:
              
              ```
              git clone https://github.com/amiuhle/iot-db-slides.git
              cd iot-db-slides
              code .
              yarn
              ```
            </aside>
          </section>

          <section>
            <h2>Starten</h2>
            <pre><code data-trim data-noescape>
              # Install dependencies
              yarn

              # Start server
              yarn start
            </code></pre>
            <a href='http://localhost:8000' target='_blank'>http://localhost:8000</a>
          </section>

          <section data-background='images/chrome-devtools.png'>
          </section>
          
          <section>
            <h2>Bedienung</h2>
            <ul>
              <li><kbd>Cmd</kbd>+<kbd>Shift</kbd>+<kbd>I</kbd></li>
              <li><kbd>S</kbd> &mdash; Speaker Notes</li>
              <li><kbd>Esc</kbd> &mdash; Übersicht</li>
              <li>Manche Slides gehen nach unten</li>
            </ul>
          </section>
        </section>

        <section>
          <section>
            <h2>Kickerboard</h2>
            <a href='https://github.com/amiuhle/iot-kickerboard' target='_blank'>https://github.com/amiuhle/iot-kickerboard</a>
            <pre><code data-trim data-noescape>
              # Switch to exercise-01
              git checkout exercise-01

              # Install dependencies
              yarn

              # Start server
              yarn start
            </code></pre>
          </section>

          <section>
            <h2>Dokumentation</h2>
            <ul>
              <li><a target='_blank' href='https://wiki.selfhtml.org/'>https://wiki.selfhtml.org/</a></li>
              <li><a target='_blank' href='https://devdocs.io/'>https://devdocs.io</a></li>
            </ul>
          </section>

          <section>
            <h2>Aufgabe</h2>
            <ul>
              <li>
                Navigation mit 3 Punkten <br />
                <code>&lt;nav&gt;, &lt;ul&gt;, &lt;li&gt;</code>
              </li>
              <li>
                Tabelle mit 3 Spalten <br />
                <code>&lt;table&gt;</code>
              </li>
            </ul>
          </section>

          <section>
            <h2>Git Commit</h2>
            <pre><code data-trim data-noescape>
              git status

              git diff

              git add public/index.html
              
              git commit -m "Static leaderboard and main navigation"
            </code></pre>
          </section>
        </section>
        
        <section>
          <h2>Random Stuff</h2>
          <ul>
            <li>
              <a target='_blank' href='https://github.com/Microsoft/vscode/issues/7690#issuecomment-226102970'>Git im VS Code Terminal</a>
            </li>
            <li><code>git config --global user.name "Timo Uhlmann"</code></li>
            <li><a target='_blank' href='https://help.github.com/articles/keeping-your-email-address-private/'>Keeping your email address private - User Documentation</a></li>
          </ul>
          <aside class="notes" data-markdown>
            * Vor- und Nachname
            * VS Code Extensions!

            ```
            git config --global alias.lg "log --graph --abbrev-commit --decorate --date=relative --format=format:'%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%s%C(reset) %C(dim white)- %an%C(reset)%C(bold yellow)%d%C(reset)' --all"
            ```
          </aside>
        </section>

        <section>
          <h2>Meine Lösung</h2>

          <p><em>VS Code Demo</em></p>
          
          <aside class="notes" data-markdown>
            * Zu Branch `exercise-02` wechseln
            * Cmd + Shift + P -> "git log" + Enter
            * "Static leaderboard" -> `public/index.html` -> *Compare against previous version*
            * https://github.com/amiuhle/iot-kickerboard/commit/6af78e81e50bdc2362b401eef10922751dc2577a
            * devdocs.io -> HTML -> Standard
              * Manche Tags dürfen nur in bestimmten Tags auftauchen (`table` -> `tr`, `td` etc)
              * Block vs inline
            * Immer Dokumentation checken!
            * https://chrome.google.com/webstore/detail/validity/bbicmjjbohdfglopkidebfccilipgeif
          </aside>
        </section>

        <section>
          <section>
            <h2>CSS</h2>
            <ul>
              <li><code>git checkout exercise-02</code></li>
              <li><a href='https://github.com/amiuhle/iot-kickerboard/commit/9fea388f5268ef5d472d3b57dce6b60220954c44' target='_blank'><code>git diff</code></a></li>
            </ul>
            <pre><code data-trim data-noescape>
              # in public/index.html vor &lt;title&gt;
              &lt;link rel="stylesheet" href="styles/main.css"&gt;
              
              # Datei public/styles/main.css erstellen
            </code></pre>

            <h3>Properties</h3>
            <p>
              margin, padding, (background-)color, font-*, list-style, display, border-*, border-collapse
            </p>

            <aside class="notes" data-markdown>
              * `display: block;` vs `display: inline;`
              * Box model
              * `html`, `.class`
              * Nesting
            </aside>
          </section>
          <section>
            <h2>Meine Lösung</h2>

            <p><em>VS Code Demo</em></p>
            
            <aside class="notes" data-markdown>
              * https://github.com/amiuhle/iot-kickerboard/commit/8fcea5a9ed2f74c5b093df3336f604754e713152
              * Emmet!
            </aside>
          </section>

          <section>
            <h2>Git Commit</h2>

            <pre><code data-trim data-noescape>
              git status

              git diff

              git add .

              git commit -m "Some basic CSS styling"
            </code></pre>
          </section>
        </section>

        <section>
          <section>
            <h2>Brainstorming</h2>
            <ul>
              <li>Was kann man anzeigen?</li>
              <li>Wie ist ein Spiel definiert?</li>
              <li>Spielernamen / Teamnamen</li>
              <li>Trefferquote</li>
              <li>Graphische Darstellung</li>
            </ul>

            <aside class="notes" data-markdown>
              * SVG
            </aside>
          </section>

          <section>
            <ul>
              <li>Spieldauer Zeit vs Anzahl Shots</li>
              <li>Leaderboard pro Spiel und Gesamt</li>
              <li>Spider Diagramm</li>
              <li>Spider Diagramm</li>
              <li>Name &amp; Icon / Bild pro Team</li>
              <li>Projektion auf Spielfeld?!</li>
              <li>Trefferquote</li>
              <li>Eigentorquote</li>
              <li>Schussgeschwindigkeit etc</li>
              <li>Trefferserie</li>
              <li>Ausfallquote Spieler
                <ul>
                  <li>Wetten / Gewinnervorhersage  aufgrund von bisherigen Ausfallquoten</li>
                </ul>
              </li>
            </ul>
          </section>
        </section>

        <section>
          <section>
            <h2>Was ihr braucht</h2>
            <ul>
              <li>
                2x VS Code
                <ul>
                  <li>Slides</li>
                  <li>Kickerboard</li>
                </ul>
              </li>
              <li>Integriertes oder externes Terminal</li>
              <li>Browser</li>
            </ul>
          </section>
        </section>

        <section>
          <!--https://www.pexels.com/photo/interior-of-office-building-325229/ -->
          <section data-background="https://static.pexels.com/photos/325229/pexels-photo-325229.jpeg">
            <h2>Datenbanken</h2>
          </section>

          <section data-background="https://static.pexels.com/photos/325229/pexels-photo-325229.jpeg" data-state="dim-bg">
            <ul>
              <li class="fragment">Daten effizient speichern und abrufen</li>
              <li class="fragment">Relationale DB: Tabellen, die in Beziehung zueinander stehen</li>
              <li class="fragment">SQL: Structured Query Language</li>
              <li class="fragment">Üblicherweise Client / Server Architektur</li>
              <li class="fragment">SQLite: Einfaches, dateibasierte relationale Datenbank</li>
            </ul>
            <aside class="notes" data-markdown>
              * Google, Facebook etc: Scheint sehr effizient zu funktionieren
              * SQL für relationale DBMS, lesen und schreiben von Daten
              * Client / Server:
                * Benutzerverwaltung
                * Gleichzeitiger (Schreib-) Zugriff
            </aside>
          </section>

          <section>
            <h2>SQL</h2>
            <blockquote cite="https://de.wikipedia.org/wiki/SQL">
              &ldquo;SQL ist eine Datenbanksprache zur Definition von Datenstrukturen in relationalen Datenbanken sowie zum Bearbeiten (Einfügen, Verändern, Löschen) und Abfragen von darauf basierenden Datenbeständen.&rdquo;
            </blockquote>
          </section>

          <section>
            <h2>Kickerboard aktualisieren</h2>
            <pre><code data-trim data-noescape>
              # Meine Änderungen von GitHub holen
              git fetch

              # In den richtigen Branch wechseln
              git checkout exercise-04

              # package.json hat sich geändert
              yarn

              # Datenbank initialisieren
              yarn run knex migrate:latest

              # Datenbank mit Dummy-Werten befüllen
              yarn run knex seed:run
            </code></pre>

            <img src="images/vscode-exercise-04.png" />
          </section>

          <section>
            <h2>
              <a href="https://addons.mozilla.org/de/firefox/addon/sqlite-manager/">
                SQLite Manager
              </a>
            </h2>

            <img src="images/sqlite-teams-structure.png" />

            <aside class="notes" data-markdown>
              * [DB Browser for SQLite](http://sqlitebrowser.org/)
              * `"id" integer not null primary key autoincrement`
                * Index
                * SQLite `rowid`
              * Datentypen
                * Vergleiche
              * `null`
              * Default Value
              * `Execute SQL`
            </aside>
          </section>

          <section>
            <h2>
              SQL <code>SELECT</code> Statement
            </h2>
            <blockquote cite="https://www.sqlite.org/lang_select.html">
              The SELECT statement is used to query the database. The result of a SELECT is zero or more rows of data where each row has a fixed number of columns. A SELECT statement does not make any changes to the database.
            </blockquote>
          </section>

          <section>
            <ul>
              <li>
                Anzeigen der einer kompletten Tabelle
                <pre><code data-trim data-noescape>
                  SELECT * FROM tablename
                </code></pre>
              </li>
              <li class="fragment">
                Anzeigen bestimmter Spalten
                <pre><code data-trim data-noescape>
                  SELECT column1, column2 FROM tablename
                </code></pre>
              </li>
              <li class="fragment">
                Anzeigen bestimmter Zeilen
                <pre><code data-trim data-noescape>
                  SELECT * FROM tablename WHERE id = 1;
                  SELECT * FROM tablename WHERE id > 3;
                </code></pre>
              </li>
              <li class="fragment">
                Sortieren von Ergebnissen
                <pre><code data-trim data-noescape>
                  SELECT * FROM tablename ORDER BY id DESC
                </code></pre>
              </li>
            </ul>
          </section>

          <section>
            <p><q>Execute SQL</q> in SQLite Manager</p>
            <ol>
              <li>Zeige alle <code>teams</code> an</li>
              <li>Zeige ID und Name von allen Teams an</li>
              <li>Zeige ein bestimmtes Team an (<code>id</code>)</li>
              <li>Zeige alle <code>shots</code> eines bestimmten Teams an</li>
              <li>Zeige alle Shots in umgekehrter Reihenfolge an</li>
              <li>Zeige alle Shots an, die einen Nebenspieler getroffen haben, sortiert nach Shooter</li>
            </ol>
            <aside class="notes" data-markdown>
              * Ctrl + ;
            </aside>
          </section>
        </section>

        <section>
          <section>
            <h2>Code Review</h2>
            <a target="blank" href="https://github.com/amiuhle/iot-kickerboard/commit/4115da81caade6c9c754400509f7d37848d7d173">GitHub diff</a>
          </section>
          <section>
            <h2>Shots Tabelle</h2>
            <ol>
              <li><code>nav>ul>li</code> in <code>views/layouts/main.hbs</code></li>
              <li><code>views/shots.hbs</code> analog zu <code>teams</code></li>
              <li>
                Analog zu <code>/teams</code>
                <pre><code data-trim data-noescape>
                  // routes/pages.js
                  router.get('/shots', async (req, res) => {
                    // TODO
                  })
                </code></pre>
              </li>
            </ol>
            <aside class="notes" data-markdown>
              * `await debugAndFetch(query)`
            </aside>
          </section>
          <section>
            <h2>Code Review</h2>
            <a target="_blank" href="https://github.com/amiuhle/iot-kickerboard/commit/solution-04"><code>solution-04</code> diff</a>
          </section>
        </section>

        <section>
          <section>
            <h2>
              SQL <code>JOIN</code> Clause
            </h2>
            <p>
              Tabellen miteinander verbinden
            </p>
          </section>

          <section>
            <pre><code data-trim data-noescape>
              SELECT shots.id, shooter.name AS shooter
              FROM shots
              JOIN teams AS shooter
                ON shots.shooter_id = shooter.id
            </code></pre>
            <ul>
              <li class="fragment">
                Erweitere die Abfrage um einen weiteren JOIN, um das Target anzuzeigen.
              </li>
              <li class="fragment">
                Erweitere die Abfrage im Kickerboard Projekt entsprechend und zeige die Teamnamen anstatt der IDs an.
              </li>
            </ul>
            <a class="fragment" target="_blank" href="https://github.com/amiuhle/iot-kickerboard/commit/solution-05"><code>solution-05</code> diff</a>
          </section>
        </section>
      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
      // More info https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        history: true,

        // More info https://github.com/hakimel/reveal.js#dependencies
        dependencies: [{
            src: 'plugin/markdown/marked.js'
          },
          {
            src: 'plugin/markdown/markdown.js'
          },
          {
            src: 'plugin/notes/notes.js',
            async: true
          },
          {
            src: 'plugin/highlight/highlight.js',
            async: true,
            callback: function () {
              hljs.initHighlightingOnLoad();
            }
          }
        ]
      });
    </script>
  </body>
</html>
